README for basic uPortal deployment

For further help please refer to the uPortal home page http://www.uportal.org or
the uPortal Confluence site http://www.ja-sig.org/wiki/display/UPC/Home

WARNINGS:
----------------------------------------
Do not blindly run the ant build against a production database.  There are Ant
targets in this build which will initialize the database for uPortal.  Before
running the ant build, take care that the 
/uportal-impl/src/main/resources/properties/rdbm.properties actually describes
the database against which you intend to be working.

Do not blindly run the ant build on a production system.  There are Ant targets
in this build which clean build directories and publish the uPortal build into
a configured Tomcat instance.  Take care not to accidentally run the build such
that it overwrites a uPortal instance you care about.  Locations affected by
the build are declared in build.properties.



Manifest
----------------------------------------
build.properties    o Contains configuration for the build file that needs to
                      be customized for your environment.
build.xml           o Contains the ant build targets for working with uPortal.
pom.xml             o Contains the maven 2 description of the uPortal project


Ant Depdency
----------------------------------------
The build.xml needs to be run under Ant 1.6.2 or better except Ant 1.7.0.  Some
of our Ant tasks have been reported to fail on Ant 1.6.1 and earlier, and on
Ant 1.7.0.  


Initial Configuration
----------------------------------------
To deploy uPortal you must set the server.home variable in the
build.properties file to the instance of Tomcat you want to deploy to.


Build approach
----------------------------------------
The approach here is that there is a generic pom.xml and build.xml that you
should not have to edit, alongside a build.properties that you absolutely must
edit to reflect your local configuration. Edit build.properties to reflect such
configuration as where your Tomcat is, what context you would like uPortal to
be deployed as, etc.


Initial Deployment
----------------------------------------
You must run the initportal target before uPortal is started the first time.
This target will take care of compiling, deploying, database population and
other initial tasks. Running initportal again is similiar to hitting a reset
button on the portal. Any saved configuration in the portal is lost and a clean
version of the portal is configured.

Logging
---------------------------------------
The /uportal-war/src/main/resources/log4j.properties Log4j configuration file
will end up on the classpath for Commons Logging / log4j to find. You'll need
to either change that configuration the build or to change it in
/WEB-INF/classes/ afterwards. You can configure the logging level, where the
file should be, or even choose a different logging approach (log via XML to a
ChainSaw instance, say).

Database configuration + Tomcat context configuration
--------------------------------------
Database configuration is configured in /uportal-impl/src/main/resources/properties/rdbm.properties. 
The ant build will produce a /META-INF/context.xml file which, when you deploy
your .war, will configure the context to make the uPortal database available
via servlet-container-managed DataSource via JNIDI.  You can choose to get your
DataSource via JNDI in the context of a servlet container by configuring the
relevant /uportal-impl/src/main/resources/properties/portal.properties property.

The maven build transforms the context file declared in build.properties,
replacing those @foo@ placeholders with the matching properties in
rdbm.properties or in build.properties, to produce the context.xml file.  You
can allow this filtering to happen, or you can remove the @placeholders@ from
the context file (/uportal-war/src/main/webapp/META-INF/context.xml), replacing
them with the values you would like to use.


This README is Copyright Java Architectures Special Interest Group, 2005-2007, and is licensed for your use as per ./license.txt.